<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <div th:replace="~{fragments/head :: head}"></div>
    <title>ì…€í”„ ë©´ì ‘ ê¸°ë¡ - Mockerview</title>
    <div th:replace="~{fragments/styles :: styles}"></div>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          "Helvetica Neue", Arial, sans-serif;
        background: #f8f9fa;
        color: #212529;
        line-height: 1.6;
      }

      .navbar {
        background: white;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        z-index: 1000;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 1rem;
      }

      .navbar-content {
        display: flex;
        justify-content: space-between;
        align-items: center;
        height: 64px;
      }

      .navbar-brand {
        font-size: 1.5rem;
        font-weight: 700;
        color: #667eea;
        text-decoration: none;
      }

      .navbar-nav {
        display: flex;
        gap: 2rem;
        align-items: center;
      }

      .nav-link {
        color: #495057;
        text-decoration: none;
        font-weight: 500;
        transition: color 0.2s;
      }

      .nav-link:hover,
      .nav-link.active {
        color: #667eea;
      }

      .hamburger {
        display: none;
        flex-direction: column;
        gap: 5px;
        cursor: pointer;
        padding: 8px;
        z-index: 1001;
      }

      .hamburger span {
        width: 25px;
        height: 3px;
        background: #667eea;
        transition: all 0.3s;
        border-radius: 3px;
      }

      .hamburger.active span:nth-child(1) {
        transform: rotate(45deg) translate(8px, 8px);
      }

      .hamburger.active span:nth-child(2) {
        opacity: 0;
      }

      .hamburger.active span:nth-child(3) {
        transform: rotate(-45deg) translate(7px, -7px);
      }

      .page-header {
        margin-top: 64px;
        padding: 3rem 0 2rem;
        background: #667eea;
        color: white;
      }

      .page-title h1 {
        font-size: 2rem;
        font-weight: 700;
        margin-bottom: 0.5rem;
      }

      .page-title p {
        font-size: 1.1rem;
        opacity: 0.9;
      }

      .content-wrapper {
        margin: 2rem 0;
      }

      .session-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
        gap: 1.5rem;
        margin-bottom: 2rem;
      }

      .session-card {
        background: white;
        border: 2px solid transparent;
        border-radius: 12px;
        padding: 1.5rem;
        transition: all 0.3s;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
      }

      .session-card:hover {
        box-shadow: 0 8px 16px rgba(102, 126, 234, 0.15);
        transform: translateY(-4px);
        border-color: #667eea;
      }

      .session-card-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 1rem;
        padding-bottom: 1rem;
        border-bottom: 2px solid #f0f0f0;
        gap: 1rem;
      }

      .session-card-header h3 {
        margin: 0;
        color: #212529;
        font-size: 1.2rem;
        font-weight: 600;
        flex: 1;
      }

      .badge {
        padding: 0.35rem 0.75rem;
        border-radius: 12px;
        font-size: 0.85rem;
        font-weight: 600;
        background: #667eea;
        color: white;
        white-space: nowrap;
      }

      .session-card-body {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
        margin-bottom: 1rem;
      }

      .session-stat {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .stat-label {
        color: #6c757d;
        font-size: 0.9rem;
      }

      .stat-value {
        color: #212529;
        font-weight: 600;
        font-size: 1rem;
      }

      .session-card-footer {
        display: flex;
        justify-content: flex-end;
      }

      .btn {
        padding: 0.75rem 1.25rem;
        border: none;
        border-radius: 8px;
        font-size: 0.95rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s;
        text-decoration: none;
        display: inline-block;
        text-align: center;
      }

      .btn-view {
        background: #667eea;
        color: white;
      }

      .btn-view:hover {
        background: #5568d3;
        transform: translateY(-1px);
      }

      .empty-state {
        text-align: center;
        padding: 4rem 2rem;
        background: white;
        border-radius: 12px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
      }

      .empty-icon {
        font-size: 4rem;
        margin-bottom: 1rem;
      }

      .empty-text {
        color: #6c757d;
        font-size: 1.1rem;
        margin-bottom: 2rem;
      }

      .btn-primary {
        background: #667eea;
        color: white;
      }

      .btn-primary:hover {
        background: #5568d3;
        transform: translateY(-1px);
      }

      .pagination {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 0.5rem;
        margin: 3rem 0;
      }

      .pagination button {
        padding: 0.75rem 1.25rem;
        border: 2px solid #667eea;
        background: white;
        color: #667eea;
        border-radius: 8px;
        cursor: pointer;
        font-weight: 600;
        transition: all 0.2s;
      }

      .pagination button:hover:not(:disabled) {
        background: #667eea;
        color: white;
      }

      .pagination button:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      .pagination button.active {
        background: #667eea;
        color: white;
      }

      .page-numbers {
        display: flex;
        gap: 0.5rem;
      }

      @media (max-width: 768px) {
        .navbar-nav {
          position: fixed;
          top: 64px;
          left: 0;
          right: 0;
          background: white;
          flex-direction: column;
          gap: 0;
          padding: 0;
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
          transform: translateX(-100%);
          opacity: 0;
          transition: all 0.3s ease;
          pointer-events: none;
          height: calc(100vh - 64px);
          overflow-y: auto;
        }

        .navbar-nav.active {
          transform: translateX(0);
          opacity: 1;
          pointer-events: all;
        }

        .nav-link {
          padding: 1.2rem 1.5rem;
          width: 100%;
          text-align: left;
          border-bottom: 1px solid #f0f0f0;
          font-size: 1.1rem;
        }

        .nav-link:hover {
          background: #f8f9ff;
        }

        .hamburger {
          display: flex;
        }

        .page-header {
          padding: 2rem 0 1.5rem;
        }

        .page-title h1 {
          font-size: 1.5rem;
        }

        .page-title p {
          font-size: 0.95rem;
        }

        .session-grid {
          grid-template-columns: 1fr;
          gap: 1rem;
        }

        .session-card {
          padding: 1rem;
        }

        .session-card-header h3 {
          font-size: 1.1rem;
        }

        .session-card-body {
          gap: 0.5rem;
        }

        .empty-state {
          padding: 2rem 1rem;
        }
      }
    </style>
  </head>
  <body>
    <div th:replace="~{fragments/navbar :: navbar}"></div>
    <!--<nav class="navbar">
      <div class="container">
        <div class="navbar-content">
          <a class="navbar-brand" href="/">Mockerview</a>
          <div class="hamburger" onclick="toggleMenu()">
            <span></span>
            <span></span>
            <span></span>
          </div>
          <div class="navbar-nav">
            <a class="nav-link" href="/selfinterview/list">ì…€í”„ ë©´ì ‘</a>
            <a class="nav-link active" href="/selfinterview/history">ë‚´ ê¸°ë¡</a>
            <a class="nav-link" href="/session/list">ì„¸ì…˜ ëª©ë¡</a>
            <a class="nav-link" th:href="@{/auth/mypage}">ë§ˆì´í˜ì´ì§€</a>
          </div>
        </div>
      </div>
    </nav> -->

    <div class="page-header">
      <div class="container">
        <div class="page-title">
          <h1>ì…€í”„ ë©´ì ‘ ê¸°ë¡</h1>
          <p>ë‚˜ì˜ ì…€í”„ ë©´ì ‘ ì—°ìŠµ ê¸°ë¡ì„ í™•ì¸í•˜ì„¸ìš”</p>
        </div>
      </div>
    </div>

    <div class="container content-wrapper">
      <div th:if="${sessions.isEmpty()}" class="empty-state">
        <div class="empty-icon">ğŸ“‹</div>
        <p class="empty-text">ì•„ì§ ì—°ìŠµ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤</p>
        <a href="/selfinterview/create" class="btn btn-primary"
          >ì²« ì—°ìŠµ ì‹œì‘í•˜ê¸°</a
        >
      </div>

      <div th:if="${!sessions.isEmpty()}" class="session-grid">
        <div th:each="interviewSession : ${sessions}" class="session-card">
          <div class="session-card-header">
            <h3 th:text="${interviewSession.title}">ë©´ì ‘ ì œëª©</h3>
            <span class="badge" th:text="${interviewSession.sessionType}"
              >TEXT</span
            >
          </div>

          <div class="session-card-body">
            <div class="session-stat">
              <span class="stat-label">ì§ˆë¬¸ ìˆ˜</span>
              <span
                class="stat-value"
                th:text="${interviewSession.questions != null ? interviewSession.questions.size() : 0} + 'ê°œ'"
                >5ê°œ</span
              >
            </div>
            <div class="session-stat">
              <span class="stat-label">í‰ê·  ì ìˆ˜</span>
              <span
                class="stat-value"
                th:text="${interviewSession.avgScore != null ? #numbers.formatDecimal(interviewSession.avgScore, 1, 1) + 'ì ' : 'N/A'}"
                >85.5ì </span
              >
            </div>
            <div class="session-stat">
              <span class="stat-label">ì—°ìŠµ ì‹œê°„</span>
              <span
                class="stat-value"
                th:text="${#temporals.format(interviewSession.createdAt, 'MM/dd HH:mm')}"
                >10/18 14:30</span
              >
            </div>
          </div>

          <div class="session-card-footer">
            <a
              th:href="@{/session/scoreboard/{id}(id=${interviewSession.id})}"
              class="btn btn-view"
              >ê²°ê³¼ ë³´ê¸°</a
            >
          </div>
        </div>
      </div>

      <div class="pagination" th:if="${totalPages > 1}">
        <button
          th:disabled="${currentPage == 1}"
          th:onclick="'window.location.href=\'/selfinterview/list?page=1\''"
        >
          ì²˜ìŒ
        </button>
        <button
          th:disabled="${currentPage == 1}"
          th:onclick="'window.location.href=\'/selfinterview/list?page=' + ${currentPage - 1} + '\''"
        >
          ì´ì „
        </button>

        <div class="page-numbers">
          <button
            th:each="i : ${#numbers.sequence(startPage, endPage)}"
            th:classappend="${i == currentPage ? 'active' : ''}"
            th:onclick="'window.location.href=\'/selfinterview/list?page=' + ${i} + '\''"
            th:text="${i}"
          >
            1
          </button>
        </div>

        <button
          th:disabled="${currentPage == totalPages}"
          th:onclick="'window.location.href=\'/selfinterview/list?page=' + ${currentPage + 1} + '\''"
        >
          ë‹¤ìŒ
        </button>
        <button
          th:disabled="${currentPage == totalPages}"
          th:onclick="'window.location.href=\'/selfinterview/list?page=' + ${totalPages} + '\''"
        >
          ë§ˆì§€ë§‰
        </button>
      </div>
    </div>

    <div th:replace="~{fragments/footer :: footer}"></div>
    <div th:replace="~{fragments/scripts :: scripts}"></div>

    <script>
      function toggleMenu() {
        const hamburger = document.querySelector(".hamburger");
        const navbarNav = document.querySelector(".navbar-nav");
        hamburger.classList.toggle("active");
        navbarNav.classList.toggle("active");
      }
    </script>
    <script src="/js/push-init.js"></script>
    <script src="/js/push-notifications.js"></script>
  </body>
</html>
